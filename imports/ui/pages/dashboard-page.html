 <template name="dashboard_page">

  <body>
<nav class="navbar navbar-dark bg-primary">
            <div >
              <a class="navbar-brand" id="meetable-name" href="#">Meetable</a>
              <ul class="navbar-nav navbar-right pull-right">
                  {{> atNavButton}}
              </ul>
           </div>
        </nav>

    <div class="container-fluid">
      <div class="row">
        <!-- Left column start -->
        <div class="col-sm-5" id="dashboardLeftCol">
          <h4> Welcome, {{email}}!</h4>

            <!-- Start schedule meeting block -->
            <div class="row">
              <button id="scheduleButton" type="button" class="btn btn-block btn-lg">
                <div class="text-left">
                  Schedule a Meeting
                </div>
              </button>
            </div>
            <div id="scheduleMeeting" class="container-fluid dashboardDropdownContent">
              <!--
              <form>
                <fieldset>
                  <div class="form-group">
                    <div class="col-md-10">
                      <input type="text" class="form-control" id="meetingInvitee" placeholder="Participant Email(s), comma separated" required>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-md-10">
                      <input type="text" class="form-control" id="meetingTitle" placeholder="Title">
                    </div>
                  </div>
                
                  <div class="form-group">
                    <div class="col-md-10">
                      <input type="number" class="form-control" id="meetingLength" onkeypress="return event.charCode >= 48 && event.charCode <= 57" placeholder="Meeting Duration (minutes)" required>
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="col-md-10 datetimepicker">
                      <input id="chooseWindowStart" class="set-start-date form-control" type="text" placeholder="Scheduling Window Start"/>
                    </div>
                  </div>
                  <script type="text/javascript">
                      $(function () {
                          $('#chooseWindowStart').datetimepicker({
                            format: 'MM-DD-YYYY h:mm A',
                            minDate: new Date(),
                          });
                      });
                  </script>
                  <div class="form-group">
                    <div class="col-md-10 datetimepicker">
                      <input id="chooseWindowEnd" class="set-end-date form-control" type="text" placeholder="Scheduling Window End"/>
                    </div>
                  </div>
                  <script type="text/javascript">
                      $(function () {
                          $('#chooseWindowEnd').datetimepicker({
                            format: 'MM-DD-YYYY h:mm A',
                            minDate: new Date(),
                          });
                      });
                  </script>
                  
                  <div class="form-group">
                    <div class="col-md-10 col-md-offset-2">
                      <button type="button" class="btn btn-default" id="cancelCreateMeeting">Cancel</button>
                      <input type="submit" class="btn btn-primary" id="save">
                    </div>
                  </div>
                </fieldset>
              </form>
              -->
              <form>
                <label>Email addresses <input type="text" id="meetingInvitee" placeholder="johndoe@gmail.com, suzie@gmail.com" required></label>
                <label>Title <input type="text" placeholder="math study session" required></label>
                <label>Duration (minutes) <input type="text" placeholder="60" required></label>
                <label>Meeting Window Start <input type="text" id="windowStartInput" class="windowDatepicker" required></label>
                <label>Meeting Window End <input id="windowEndInput" class="windowDatepicker" type="text" required></label>
                
                <div><input type="submit"></div>
              </form>

            </div>
            
            <!-- End schedule meeting block -->

            <!-- Start incoming block -->
            <div class="row">
              <button id="invitesButton" type="button" class="btn btn-block btn-lg">
                <div class="text-left">
                   Incoming
                  <span class="badge">{{numIncoming}}</span>
                </div>
              </button>
            </div>
            <div id="incomingInvites" class="container-fluid dashboardDropdownContent">
              <div class="col">
                 <!-- print every invite -->
                  {{#each invites}}
                    {{> invite}}
                  {{else}}
                    <div class="container-fluid"> <p>You have no invites at the moment :(</p></div>
                  {{/each}}
                </div>
            </div>
            <div class="row">
              <button id="outgoingButton" type="button" class="btn btn-block btn-lg">
                <div class="text-left">
                  Outgoing
                  <span class="badge">{{numOutgoing}}</span>
                </div>
              </button>
            </div>
            <div id="outgoingInvites" class="container-fluid dashboardDropdownContent">
              <div class="col">
                   <!-- print every outgoing meeting -->
                {{#each outgoingMeetings}}
                  {{> outgoing}}
                {{else}}
                  <div class="container-fluid"> <p> You have not sent any meeting invites yet. Click 'Schedule a Meeting' to get started! </p></div>
                {{/each}}
              </div>
            </div>

            <div class="row">
                <button id="meetingsButton" type="button" class="btn btn-block btn-lg">
                  <div class="text-left">
                    Finalized Meetings
                    <span class="badge">{{numFinalized}}</span>
                  </div>
                </button>
            </div>
            <div id="finalizedMeetings" class="container-fluid dashboardDropdownContent">
              <div class="col">
                 <!-- print the scheduled meetings -->
                {{#each final}}
                  {{> finalizedMeeting}}
                {{else}}
                  <div class="container-fluid"> <p> You do not have any finalized meetings yet. </p></div>
                {{/each}}
              </div>
            </div>

            <div class="row">
              <button id="extraBusyTimesButton" type="button" class="btn btn-block btn-lg">
                <div class="text-left">
                  Add Extra Busy Times
                </div>
              </button>
            </div>
            <div class="container-fluid dashboardDropdownContent" id="extraBusyTimes">
              <div class="col">
                 <!-- print the scheduled meetings -->
                {{#each additionalTime}}
                  {{> additional}}
                {{else}}
                  <div class="container-fluid"><p> You do not have any additional busy times. </p></div>
                {{/each}}
              </div>
              <form>
                <div class="form-group">
                  <div class="container-fluid"> <p> Add a new busy time: </p></div>
                  <div class="col-md-10 datetimepicker">
                    <input id="datetime-start" class="set-start-date form-control" type="text" placeholder="Start Time"/>
                    </div>
                </div>
                <script type="text/javascript">
                    $(function () {
                        $('#datetime-start').datetimepicker({
                          format: 'MM-DD-YYYY h:mm A',
                          minDate: new Date(),
                        });
                    });
                </script>
                <div class="form-group">
                  <div class="col-md-10 datetimepicker">
                    <input id="datetime-end" class="set-end-date form-control" type="text" placeholder="End Time"/>
                  </div>
                </div>
                <script type="text/javascript">
                    $(function () {
                        $('#datetime-end').datetimepicker({
                          format: 'MM-DD-YYYY h:mm A',
                          minDate: new Date(),
                        });
                    });
                </script>
                <button type = "button" class="btn btn-primary" id = "submit-extra-times">Submit</button>
              </form>
            </div>

            <!-- Start Settings button and content -->
            <div class="row">
              <button id="settingsButton" type="button" class="btn btn-block btn-lg">
                <div class="text-left">Settings</div>
              </button>
            </div>
            <div class="container-fluid dashboardDropdownContent" id="settings">
              <div class="col">
                <p>Uncheck the calendars you don't want to be considered</p>
                <div class="container-fluid" id="hideCalendars">
                  <form>
                    {{#each userCalendars}}
                      {{> calendar}}
                    {{/each}}
                  </form>
                </div>

                  <form>
                  <div class="form-group">
                    <div class="container-fluid">
                      <p> We know you need to sleep. Let us know when you never want to have a meeting scheduled.</p>
                      </div>
                    <div class="col-md-10 datetimepicker">
                      <!-- TODO: this lavel text is blue probably because of the datetimepicker class on the div, Not sure if the datetimepicker class is necessary? if it is, then we can assign the label a class and change its font color -->
                      <label>
                        I don't want to meet before:
                        <input id="no-meetings-before" class="set-start-date form-control" type="text" placeholder="09:00"/>
                      </label>
                      </div>
                  </div>
                  <script type="text/javascript">
                      $(function () {
                          $('#no-meetings-before').datetimepicker({
                            format: 'HH:mm'
                          });
                      });
                  </script>
                  <div class="form-group">
                    <div class="col-md-10 datetimepicker">
                      <label>I don't want to meet after:
                        <input id="no-meetings-after" class="set-end-date form-control" type="text" placeholder="10:00"/>
                      </label>
                    </div>
                  </div>
                  <script type="text/javascript">
                      $(function () {
                          $('#no-meetings-after').datetimepicker({
                            format: 'HH:mm'
                          });
                      });
                  </script>
                  <button type = "button" class="btn btn-primary" id = "submit-no-meetings-times">Submit</button>
                </form>
              </div>
            </div>
            <!-- End Settings button and content -->
        </div>
        <!--left column end -->

        <!-- Right column start -->
        <div class="col-sm-7" id="dashboardRightCol">
          <div id="events-calendar"></div>
        </div>
         <!-- Right column end -->
      </div>
    </div>
  </body>
</template>

<template name="invite">
  {{> Template.dynamic template=inviteType}}
</template>

<!-- template for displaying an incoming invite -->
<template name="incoming">
  <!-- user already accepted invite, now waiting on other participants to accept -->
  {{#if acceptedInvite}}
    <span class="label label-primary">Accepted, waiting for host to finalize time.</span>
    <h4>{{inviterName}}</h4> invites you to <b>{{meetingTitle}}</b> ({{meetingDuration}})
  <!-- user has not accepted invite -->
  {{else}}
   <h4>{{inviterName}}</h4> invites you to <b>{{meetingTitle}}</b> ({{meetingDuration}})
    <div class="row">
      <button type="button" class="btn btn-default btn-sm" id="declineInvite">Decline</button>
      <button type="save" class="btn btn-primary btn-sm" id="acceptInvite">Accept</button>
    </div>
  {{/if}}
</template>

<!-- template for displaying a invite that's ready to finalize -->
<template name="readyToFinalize">
  {{> Template.dynamic template=finalizeType}}
</template>

<!-- template for displaying an invite ready to finalize if you are not the selector -->
<template name="notSelector">
  <!-- <div class="row"> -->
    <!-- <div class="col-sm-6 col-sm-offset-3" style ='background-color:#f9ecd1;'> -->
      Waiting on <h4>{{inviterName}}</h4> to select a time for <b>{{meetingTitle}}</b> (Event Duration: {{meetingDuration}})
    <!-- </div> -->
  <!-- </div> -->
</template>

<!-- template for displaying an invite ready to finalize if you are the selector -->
<template name="selector">
  <div class="row">
    <div class="container-fluid">
      <h4>{{inviterName}}</h4> <p> invites you to <b>{{meetingTitle}}</b> ({{meetingDuration}})
      <br/>Please select a time for the meeting:</p>
      <form>

      {{#if suggestedTimes}}
        {{#each suggestedTimes}}
          <div class="radio">
            <label>
              <input type="radio" name="myForm" value="{{@index}}" checked="">
              {{formattedStart}} - {{formattedEnd}}
            </label>
          </div>
        {{/each}}
        <button type="submit" class="btn btn-primary" id="acceptInvite">Submit</button>
      {{else}}
        <div class="container-fluid"> <p> You are not meetable for this time window. Please reschedule!</p></div>
        <button type="delete" class="btn btn-primary btn-sm" id="deleteMeeting">Delete</button>
      {{/if}}
      </form>
    </div>
  </div>
</template>

<!-- template for displaying an outgoing meeting -->
<template name="outgoing">
  {{#if readyToFinalize}}
    {{> outgoingFinalize}}
  {{else}}
  <span class="label label-warning">Waiting for responses...</span>
    <p><h5>{{meetingTitle}}</h5> ({{meetingDuration}})</p>
    <p>Participants: {{meetingParticipants}}</p>
    <button type="cancel" class="btn btn-default" id="deleteOutgoing">Delete</button>
  {{/if}}
</template>

<template name="additional">
  <p> - {{timeStart}} - {{timeEnd}}
  <button type="button" class="btn link-btn" id="delete-button">delete</button>
  </p>
</template>


<!-- template for displaying an outgoing meeting that's ready to finalize -->
<template name="outgoingFinalize">
  <span class="label label-primary">Ready to finalize</span>
      <h4><b>{{meetingTitle}}</b></h4> ({{meetingDuration}})
      <p>Participants: {{meetingParticipants}}
      <br/> Please select a time for the meeting:</p>
      <form>
      {{#each suggestedTimes}}
        {{> additional}}
        <div class="radio">
          <label>
            <input type="radio" name="myForm" value="{{@index}}" checked="">
            {{timeStart}} - {{timeEnd}}
          </label>
        </div>
      {{/each}}
      <button type="cancel" class="btn btn-default" id="deleteInvite">Delete</button>
      <button type="submit" class="btn btn-primary" id="acceptInvite">Submit</button>
      </form>
</template>

<!-- template for displaying a finalized meeting -->
<template name="finalizedMeeting">
  <h5><mark>{{meetingTitle}}</mark></h5>
  <p><b>{{meetingHost}}</b></p>
  <p> Participants: {{participants}}<br/>
  Start: {{selectedStart}} <br/>
  End: {{selectedEnd}}</p>
  <!-- only display the push to Gcal button once. After being pushed, take away the button and display label confirming push has already occurred -->
  {{#if addedToGCal}}
    <span class="label label-default">Event pushed to Google calendar</span>
  {{else}}
    <a href="javascript:void(0)" class="btn btn-raised btn-primary btn-xs" id="pushEvent">Push to Google calendar</a>
  {{/if}}
</template>

<!-- checkbox for choosing whether to display calendar -->
<template name="calendar">
  <div class="container-fluid">
  <label>
    <input type="checkbox" checked={{isChecked}}> {{calendarTitle}}
  </label>
  </div>
</template>
